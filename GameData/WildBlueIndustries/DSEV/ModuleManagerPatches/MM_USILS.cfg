// USI configs for DSEV defined by Jarred Allen

// Greenhouses
@PART[WBI_D2Greenhouse]:NEEDS[UmbraSpaceIndustries]
{
	// This part is a bit over 2x the mass of the largest USI greenhouse, so I
	// made it consume twice as much mulch and the same amount of fertilizer.
	// I also gave it twice the storage capacity
	MODULE
	{
		name = ModuleResourceConverter_USI
		ConverterName = Agroponics
		tag = Agroponics
		StartActionName = Start Agroponics
		StopActionName = Stop Agroponics
		INPUT_RESOURCE
		{
			ResourceName = Mulch
			Ratio =  0.00240000
		}
		INPUT_RESOURCE
		{
			ResourceName = Fertilizer
			Ratio =  0.00012000
		}
		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 5.04
			// EC is proportional to the supplies out from the USI inline greenhouse
		}
		OUTPUT_RESOURCE
		{
			ResourceName = Supplies
			Ratio = 0.00252000
			DumpExcess = False
		}
	}
	
	RESOURCE
	{
		name = Mulch
		amount = 0
		maxAmount = 600
	}
	RESOURCE
	{
		name = Supplies
		amount = 0
		maxAmount = 600
	}
	RESOURCE
	{
		name = Fertilizer
		amount = 0
		maxAmount = 600
	}
}
@PART[wbiZenGreenhouse]:NEEDS[UmbraSpaceIndustries]
{
	// This part has 65% the mass of the largest USI greenhouse, so I
	// made it consume 65% as much mulch and fertilizer.
	// I also gave it 65% the storage capacity
	MODULE
	{
		name = ModuleResourceConverter_USI
		ConverterName = Agroponics
		tag = Agroponics
		StartActionName = Start Agroponics
		StopActionName = Stop Agroponics
		INPUT_RESOURCE
		{
			ResourceName = Mulch
			Ratio =  0.00078000
		}
		INPUT_RESOURCE
		{
			ResourceName = Fertilizer
			Ratio =  0.00007800
		}
		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 1.72
			// EC is proportional to the supplies out from the USI inline greenhouse
		}
		OUTPUT_RESOURCE
		{
			ResourceName = Supplies
			Ratio = 0.00085800
			DumpExcess = False
		}
	}
	
	RESOURCE
	{
		name = Mulch
		amount = 0
		maxAmount = 195
	}
	RESOURCE
	{
		name = Supplies
		amount = 0
		maxAmount = 195
	}
	RESOURCE
	{
		name = Fertilizer
		amount = 0
		maxAmount = 195
	}
}

// Habitation
@PART[WBI_Clydesdale,WBI_DanubeDelta]:NEEDS[UmbraSpaceIndustries]
{
	// The two large crew cabins
	MODULE
	{
		name = ModuleLifeSupport
	}
	
	MODULE 
	{
		name = ModuleHabitation
		BaseKerbalMonths = 1
		// It's a pretty nice pod, so I gave it a little bit of habitation
		CrewCapacity = 9
		BaseHabMultiplier = 0.65
		// I also gave a slight habitat multiplier because the inside is nice.
		ConverterName = Habitat
		StartActionName = Start Habitat
		StopActionName = Stop Habitat		
		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 0.0928
			// Feels right to me
		}
	}
	
	MODULE
	{
		name = USI_ModuleFieldRepair
	}
}
@PART[WBI_D2Centrifuge]:NEEDS[UmbraSpaceIndustries]
{
	MODULE
	{
		name = ModuleLifeSupport
	}
	
	MODULE 
	{
		name = ModuleHabitation
		BaseKerbalMonths = 50
		CrewCapacity = 12
		BaseHabMultiplier = 2.5
		// I gave it a large habitation multiplier and base months because spin
		// gravity is a nice thing to have
		ConverterName = Habitat
		StartActionName = Start Habitat
		StopActionName = Stop Habitat		
		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 0.722
			// It needs a lot of energy because it gives a lot of habitat space
		}
	}
	
	MODULE
	{
		name = USI_ModuleFieldRepair
	}
}
@PART[wbiNautilusCentrifuge]:NEEDS[UmbraSpaceIndustries]
{
	// Scaled up from the D2 Centrifuge to the higher crew
	MODULE
	{
		name = ModuleLifeSupport
	}
	
	MODULE 
	{
		name = ModuleHabitation
		BaseKerbalMonths = 50
		CrewCapacity = 16
		BaseHabMultiplier = 2.5
		// I gave it a large habitation multiplier and base months because spin
		// gravity is a nice thing to have
		ConverterName = Habitat
		StartActionName = Start Habitat
		StopActionName = Stop Habitat		
		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 0.963
			// It needs a lot of energy because it gives a lot of habitat space
		}
	}
	
	MODULE
	{
		name = USI_ModuleFieldRepair
	}
}
@PART[WBI_D2Hab]:NEEDS[UmbraSpaceIndustries]
{
	// D2 Habitat Module
	// I based the stats off of the hitchhiker pod.
	MODULE
	{
		name = ModuleLifeSupport
	}
	
	MODULE 
	{
		name = ModuleHabitation
		BaseKerbalMonths = 29
		// Scaled up the habitation time proportional to mass
		CrewCapacity = 6
		// Scaled up crew capacity to the crew capacity of the part
		BaseHabMultiplier = 0
		ConverterName = Habitat
		StartActionName = Start Habitat
		StopActionName = Stop Habitat		
		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 0.925
			// Increased EC requirement proportionate to kerbals*sqrt(months)
		}
	}
	
	MODULE
	{
		name = USI_ModuleFieldRepair
	}
}
@PART[WBI_D2Office]:NEEDS[UmbraSpaceIndustries]
{
	MODULE
	{
		name = ModuleLifeSupport
	}
	
	MODULE 
	{
		name = ModuleHabitation
		BaseKerbalMonths = 18
		CrewCapacity = 10
		// Same kerbal-months as D2 Hab because they have same mass
		BaseHabMultiplier = 0
		ConverterName = Habitat
		StartActionName = Start Habitat
		StopActionName = Stop Habitat		
		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 0.925
			// Same EC usage because they give the same kerbal-months
		}
	}
	
	MODULE
	{
		name = USI_ModuleFieldRepair
	}
}
@PART[WBI_HomesteadMk3]:NEEDS[UmbraSpaceIndustries]
{
	MODULE
	{
		name = ModuleLifeSupport
	}
	
	MODULE 
	{
		name = ModuleHabitation
		BaseKerbalMonths = 25
		CrewCapacity = 7
		// Same kerbal-months as D2 Hab because they have same mass
		BaseHabMultiplier = 0
		ConverterName = Habitat
		StartActionName = Start Habitat
		StopActionName = Stop Habitat		
		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 0.925
			// Same EC usage because it gives the same kerbal-months
		}
	}
	
	MODULE
	{
		name = USI_ModuleFieldRepair
	}
}

// Recyclers
@PART[WBI_D2Lab]:NEEDS[UmbraSpaceIndustries]
{
	// Modeled off of the specs given to the stock science lab
	MODULE
	{
		name = ModuleLifeSupport
	}

	MODULE
	{
		name = ModuleLifeSupportRecycler
		CrewCapacity = 8
		// Doubled recycler strength because this part has twice as many seats
		RecyclePercent = .5
		ConverterName = Life Support
		tag = Life Support
		StartActionName = Start Life Support
		StopActionName = Stop Life Support

		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 2
			// Doubled EC consumption for doubled recycler strength
		}
	}

	MODULE
	{
		name = USI_ModuleFieldRepair
	}
}
