PART
{
	// --- general parameters ---
	name = WBI_TranquilityHab
	module = Part
	author = Angel-125

	// --- asset parameters ---
	rescaleFactor = 1
	MODEL
	{
		model = WildBlueIndustries/DSEV/Assets/TranquilityHab
	}

	// --- node definitions ---
	node_stack_top = 0.0, 0.9375, 0.0, 0.0, 1, 0.0, 2
	node_stack_bottom = 0.0, -0.9375, 0.0, 0.0, -1, 0.0, 2
	node_attach = 1.25, 0.0, 0.0, 1.0, 0.0, 0.0, 2

	// --- editor parameters ---
	TechRequired = advExploration
	entryCost = 12400
	cost = 4000
	category = Utility
	subcategory = 0
	title = Tranquility Mk2 Habitat
	manufacturer = Wild Blue Industries
	description = Contrary to its name, the Tranquility Mk2 Habitat is quite loud. Who lets someone bring a ghetto blaster into space, anyway?

	// attachment rules: stack, srfAttach, allowStack, allowSrfAttach, allowCollision
	attachRules = 1,1,1,1,0

	// --- standard part parameters ---
	mass = 1.0
	dragModelType = default
	maximum_drag = 0.2
	minimum_drag = 0.3
	angularDrag = 2
	crashTolerance = 6
	breakingForce = 2500
	breakingTorque = 2500
	maxTemp = 1500
	skinMaxTemp = 2300
	CrewCapacity = 4
	vesselType = Station
	fuelCrossFeed = True
	bulkheadProfiles = size2

	INTERNAL
	{
		name = crewCabinInternals
	}

	MODULE
	{
		name = WBIMultiConverter
		enableLogging = True

		showGUI = True

		//Some containers don't hold as much resources as the template specifies, while others hold more.
		//Since the resource templates specify base amounts, the capacity factor specifies a multiplier to
		//factor into the resource amounts.
		capacityFactor = 0.25

		//Determines if the part can be reconfigured out in the field.
		fieldReconfigurable = true

		//name of the template nodes to use
		templateNodes = TRANQ

		//Short name of the default module template.
		//This is used when selecting the part in the editor.
		//User will then right-click on the module to change its type.
		defaultTemplate = Tranquility Hab

		//Name of the logo panel transforms
		decalsVisible = false

		//If the part has a KIS container, this is the base and max amount
		baseStorage = 700
		maxStorage = 700

		opsViewTitle = Tranquility Habitat
	
		//Snacks
		resourcesToKeep:NEEDS[SnacksUtils] = ElectricCharge;Snacks

		//Kerbalism
		resourcesToKeep:NEEDS[Kerbalism] = ElectricCharge;Shielding;Food;Oxygen

		//TAC-LS
		resourcesToKeep:NEEDS[TacLifeSupport] = ElectricCharge;Food;Oxygen;Water;CarbonDioxide;Waste;WasteWater

		//USI-LS
		resourcesToKeep:NEEDS[USILifeSupport] = ElectricCharge;Supplies;Mulch;ReplacementParts
	}

	MODULE
	{
		name = ModuleQualityControl
		quality = 20
		mtbf = 540
		guiVisible = false

		showUpgradesInModuleInfo = true
		UPGRADES
		{
			UPGRADE
			{
				name__ = DSEVQuality1
				description__ = Quality: 75; MTBF: 810hrs
				techRequired__ = advMetalWorks
				mtbf = 810
				quality = 25
			}
			UPGRADE
			{
				name__ = DSEVQuality2
				description__ = Quality: 100; MTBF: 1215hrs
				techRequired__ = metaMaterials
				mtbf = 1215
				quality = 30
			}
		}
	}

	MODULE:NEEDS[KIS]
	{
		name = ModuleKISInventory
		maxVolume = 700
		externalAccess = true
		internalAccess = true
		slotsX = 3
		slotsY = 3
		slotSize = 50
		itemIconResolution = 128
		selfIconResolution = 128
		openSndPath = KIS/Sounds/containerOpen
		closeSndPath = KIS/Sounds/containerClose
		defaultMoveSndPath = KIS/Sounds/itemMove
	}

	MODULE
	{
		name = WBIPropStateHelper
	}

	MODULE
	{
		name = FlagDecal
		textureQuadName = flagTransform
		flagDisplayed = true
	}

	RESOURCE
	{
		name = ElectricCharge
		amount = 200
		maxAmount = 200
		isTweakable = false
	}

}

//The MOH can handle the Habitation wing of Pathfinder when the mod is installed.
//Due to its smaller size, it is much less efficient.
@PART[WBI_TranquilityHab]:FOR[DSEV]:NEEDS[Pathfinder]:FINAL
{
	@MODULE[WBIMultiConverter]
	{
		@name = WBIMultipurposeHab
		allowedTags = moleHab
		@templateNodes = TRANQ;PATH_HABITATION

		efficiency = 0.25
		productivity = 0.25
		materialCostModifier = 0.5
	}

	MODULE
	{
		name = WBIResourceDistributor
	}
}

TRANQ
{
	author = Angel-125
	name = Tranquility
	title = "Tranquility" Mk2 Habitat
	templateTags = moleHab
	mass = 2.5
	requiredResource = Equipment
	requiredAmount = 1000
	reconfigureSkill = ConverterSkill
	logoPanel = WildBlueIndustries/000WildBlueTools/CommonTemplates/Decals/Ponderosa
	glowPanel = WildBlueIndustries/000WildBlueTools/CommonTemplates/Decals/Ponderosa
	description = Contrary to its name, the Tranquility Mk2 Habitat is quite loud. Who let someone bring a boombox into space, anyway?
	toolTip = The Tranquility Mk2 Habitat can participate in Pathfinder's Habitation services.
	toolTipTitle = Your First Mark Two Habitat
	ignoreMaterialModifier = true
}